---
# Namespace for the operator
apiVersion: v1
kind: Namespace
metadata:
  name: cluster-assessment-operator
  labels:
    openshift.io/cluster-monitoring: "true"
---
# OperatorGroup to control operator scope
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: cluster-assessment-operator
  namespace: cluster-assessment-operator
spec:
  # Empty targetNamespaces = AllNamespaces mode (cluster-scoped)
  targetNamespaces: []
---
# CatalogSource pointing to our catalog image
# NOTE: Update the OCP_VERSION tag to match your cluster version (v4.12-v4.20)
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: cluster-assessment-catalog
  namespace: openshift-marketplace
spec:
  sourceType: grpc
  image: ghcr.io/diegobskt/cluster-assessment-operator-catalog:v4.20
  displayName: Cluster Assessment Operator
  publisher: Community
  updateStrategy:
    registryPoll:
      interval: 10m
---
# Subscription to install the operator
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: cluster-assessment-operator
  namespace: cluster-assessment-operator
spec:
  channel: stable-v1
  name: cluster-assessment-operator
  source: cluster-assessment-catalog
  sourceNamespace: openshift-marketplace
  installPlanApproval: Automatic
